(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{388:function(t,a,r){"use strict";r.r(a);var s=r(46),_=Object(s.a)({},(function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"抓包工具-charles"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#抓包工具-charles"}},[t._v("#")]),t._v(" 抓包工具-Charles")]),t._v(" "),r("h2",{attrs:{id:"简介"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[t._v("#")]),t._v(" 简介")]),t._v(" "),r("p",[t._v("Charles 是在 PC 端常用的网络封包截取工具，在做移动开发时，我们为了调试与服务器端的网络通讯协议，常常需要截取网络封包来分析。除了在做移动开发中调试端口外，Charles 也可以用于分析第三方应用的通讯协议。配合 Charles 的 SSL 功能，Charles 还可以分析 Https 协议。\nCharles 通过将自己设置成系统的网络访问代理服务器，使得所有的网络访问请求都通过它来完成，从而实现了网络封包的截取和分析。")]),t._v(" "),r("p",[t._v("Charles 主要的功能包括：")]),t._v(" "),r("ul",[r("li",[t._v("截取http和https请求")]),t._v(" "),r("li",[t._v("mock返回参数")]),t._v(" "),r("li",[t._v("打断点，修改请求和返回")]),t._v(" "),r("li",[t._v("重定向")]),t._v(" "),r("li",[t._v("模拟弱网")])]),t._v(" "),r("p",[t._v("安装和功能主页面介绍，可以看这篇文章"),r("a",{attrs:{href:"https://juejin.cn/post/6844903665304600589",target:"_blank",rel:"noopener noreferrer"}},[t._v("Charles说明"),r("OutboundLink")],1),t._v("，接下来说下我常用的功能和小技巧。")]),t._v(" "),r("h2",{attrs:{id:"抓取https请求"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#抓取https请求"}},[t._v("#")]),t._v(" 抓取https请求")]),t._v(" "),r("p",[t._v("我们装完证书，手机代理设置成功后，经常发现，http请求是鞥看了，但是https请求，还是解析不到，这是我们需要查看，proxy-ssl proxying settings 中 ssl proxying输入勾选上"),r("br"),t._v("\nhost填写*，端口443，意思是，任意端口号为443的网址都可以解析，也就是说任意https请求都可以解析"),r("br"),t._v(" "),r("img",{attrs:{src:"https://hbimg.huabanimg.com/4ebf7fefb603e6fbff1a37ef70055fa239bce0751b6b6-RLyY7G_fw658/format/webp",alt:""}})]),t._v(" "),r("p",[t._v("配置完成后，就能成功的抓取https请求了")]),t._v(" "),r("h2",{attrs:{id:"mock接口"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#mock接口"}},[t._v("#")]),t._v(" mock接口")]),t._v(" "),r("p",[t._v("验证前端和客户端的时候，最好用的方法\n右键选择map local，就可以新增mock的接口了"),r("br"),t._v(" "),r("img",{attrs:{src:"https://hbimg.huabanimg.com/c9fea118742458322ab6c9a964da2838aaf654852db9c0-EWCtsB_fw658/format/webp",alt:""}})]),t._v(" "),r("p",[t._v("创建mock，把返回数据以JSON格式保存在本地")]),t._v(" "),r("p",[t._v("新创建的mock，会把这个请求的方式、host、路径都给带上，local path 选择好保存在本地的mock文件")]),t._v(" "),r("p",[r("strong",[t._v("小技巧")]),r("br"),t._v("\n只保留路径，只有对当前路径过滤，对于host等不去做筛选，在实际工作中，经常会有几套测试环境，host是会常变的，但路径一般都是相同的，这样便于在测试环境，及上线后的验证")]),t._v(" "),r("p",[t._v("Tools -> Map local  查看管理的mock接口"),r("br"),t._v(" "),r("img",{attrs:{src:"https://hbimg.huabanimg.com/0a8bdfcbdfb0fcca7cc4223dda534f7a43e24666138de-Fnrmuh_fw658/format/webp",alt:""}})]),t._v(" "),r("p",[r("strong",[t._v("注意")]),t._v("\n测试中，不需要mock的时候，一定要把mock功能关掉，以免无法发现服务端问题")]),t._v(" "),r("h2",{attrs:{id:"重定向-map-remote"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#重定向-map-remote"}},[t._v("#")]),t._v(" 重定向-map remote")]),t._v(" "),r("p",[t._v("工作中，会存在着多套测试环境，有的测试环境崩了，需要指定到其它环境中，就会用到重定向"),r("br"),t._v("\n右键，选择map remote"),r("br"),t._v(" "),r("img",{attrs:{src:"https://hbimg.huabanimg.com/34a7de879465c98c38e462a992106904d2305c42181dc-Sfl325_fw658/format/webp",alt:""}})]),t._v(" "),r("p",[t._v("map to : 指定到的地址")]),t._v(" "),r("p",[r("strong",[t._v("小技巧")]),r("br"),t._v("\n实际工作中，只重定向一个接口的情况是很少见，常常是重定向一整套环境，这时，只需要填写host就可以")]),t._v(" "),r("p",[t._v("Tools -> Map remote 查看管理的重定向网址"),r("br"),t._v(" "),r("strong",[t._v("注意")]),r("br"),t._v("\n测试中，不需要重定向的时候，一定要把map remote功能关掉，以免在错误的测试环境进行测试")]),t._v(" "),r("h2",{attrs:{id:"断点"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#断点"}},[t._v("#")]),t._v(" 断点")]),t._v(" "),r("p",[t._v("有的时候需要断点来查看前端，或者是后端的问题，要用到断点，既可以修改请求，也可以修改返回")]),t._v(" "),r("p",[t._v("右键，选择breakpoints"),r("br"),t._v(" "),r("img",{attrs:{src:"https://hbimg.huabanimg.com/91c32901f882a7c39f4885bf5ec89e8de88efb192d22e-FRycwd_fw658/format/webp",alt:""}})]),t._v(" "),r("p",[t._v("重新点击一次，请求相同的请求，会出现可编辑request的界面，在这可以修改请求内容，修改完成后，点击确定")]),t._v(" "),r("p",[t._v("然后出现可编辑的response界面，在这里可以修改返回内容，修改完成后，点击确定，这样，一个全新的请求，及相应的返回就出来了")]),t._v(" "),r("p",[r("strong",[t._v("小技巧")]),t._v("\n有的时候，通过点击页面无法模拟真实用户，可以通过断点的形式，去修改参数，来看后端返回是否正常"),r("br"),t._v("\n分析前端还是后端发生问题，也常用断点去排查")]),t._v(" "),r("p",[t._v("proxy -> breaktpoints 查看管理的断点接口")]),t._v(" "),r("p",[r("strong",[t._v("注意")]),t._v("\n测试中不需要断点的时候，一定要把断点的功能关掉")]),t._v(" "),r("h2",{attrs:{id:"弱网"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#弱网"}},[t._v("#")]),t._v(" 弱网")]),t._v(" "),r("p",[t._v("测试中需要模拟网络不好的时候，常用弱网")]),t._v(" "),r("p",[t._v("proxy -> Throttle Settings"),r("br"),t._v(" "),r("img",{attrs:{src:"https://hbimg.huabanimg.com/fa33647989ea4ff18c771eacb61b7482912635c323c78-Cansgl_fw658/format/webp",alt:""}})]),t._v(" "),r("p",[t._v("only for selected hosts ：勾选上指定的网址"),r("br"),t._v("\n不勾选默认是全局弱网"),r("br"),t._v("\n可以选择最大网速，网速上行、网速下行，都可以选择")])])}),[],!1,null,null,null);a.default=_.exports}}]);